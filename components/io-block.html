<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/core-toolbar/core-toolbar.html">
<link rel="import" href="../bower_components/core-icon-button/core-icon-button.html">
<link rel="import" href="../bower_components/core-header-panel/core-header-panel.html">
<link rel="import" href="../bower_components/paper-checkbox/paper-checkbox.html">

<polymer-element name="io-block" draggable=false attributes="icount ocount inputs outputs">
    <template>
        <style>
            :host {
                display: block;
                position: absolute;
                background-color: white;
                z-index: 2;
            }

            core-header-panel {
                width: 150px;
                min-height: 150px;
            }

            .inputs, .outputs {
                width: 50%
            }

            .input label, .input paper-checkbox {
                margin-left: 5px;
            }

            .output label, .output paper-checkbox {
                margin-right: 5px;
            }

            .input, .output {
                margin-top: 15px;
            } 
        </style>

        <core-header-panel id="container" mode="seamed">
            <core-toolbar>
                <span flex>Block</span>
                <core-icon-button icon="menu" on-tap="{{moreAction}}"></core-icon-button>
            </core-toolbar>

            <div horizontal layout center>
                <!-- INPUTS -->
                <div vertical layout class="inputs">
                    <template repeat="{{input, index in inputs}}">
                         <div id="i{{index}}" horizontal layout class="input">
                            <paper-checkbox checked?="{{inputs[index]}}"></paper-checkbox>
                            <label>In {{index}}</label>
                        </div>
                    </template>
                </div>

                <!-- OUTPUTS -->
                <div vertical layout class="outputs">
                    <template repeat="{{output, index in outputs}}">
                         <div id="o{{index}}" horizontal layout reverse class="output">
                            <paper-checkbox checked?="{{outputs[index]}}"></paper-checkbox>
                            <label>Out {{index}}</label>
                        </div>
                    </template>
                </div>
            </div>
            <span>{{compute()?"true":"false"}}</span>
        </core-header-panel>

    </template>


    <script>
    Polymer({

        icount: 1,

        ocount: 0,

        position: {
            x: 0,
            y: 0
        },

        ready: function () {
            var i = 0,
                inputs = [],
                outputs = [];

            while (i < this.icount) {
                inputs.push(undefined);
                i++;
            }

            i = 0;

            while (i < this.ocount) {
                outputs.push(undefined);
                i++;
            }

            this.inputs = inputs;
            this.outputs = outputs;
        },

        setPosition: function (x, y) {
            var style = this.style;

            //if (x) {
                style.left = x +'px';
                this.position.x = x;
            //}

            //if (y) {
                style.top = y + 'px';
                this.position.y = y;
            //}
        },

        compute: function () {
            return this.inputs && this.inputs[0] && this.inputs[1];
        }
    });
    </script>

</polymer-element>